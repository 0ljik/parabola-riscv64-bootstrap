--- a/PKGBUILD	2018-03-14 17:34:32.258085785 +0100
+++ b/PKGBUILD	2018-03-14 17:58:54.047708630 +0100
@@ -14,7 +14,7 @@ arch=('x86_64')
 license=('custom')
 url="http://www.python.org/"
 depends=('expat' 'bzip2' 'gdbm' 'openssl' 'libffi' 'zlib')
-makedepends=('tk' 'sqlite' 'valgrind' 'bluez-libs' 'mpdecimal' 'llvm' 'gdb' 'xorg-server-xvfb')
+makedepends=('sqlite')
 optdepends=('python-setuptools'
             'python-pip'
             'sqlite'
@@ -61,30 +61,10 @@ build() {
               --with-system-expat \
               --with-dbmliborder=gdbm:ndbm \
               --with-system-ffi \
-              --with-system-libmpdec \
               --enable-loadable-sqlite-extensions \
               --without-ensurepip
 
-  # Obtain next free server number for xvfb-run; this even works in a chroot environment.
-  export servernum=99
-  while ! xvfb-run -a -n "$servernum" /bin/true 2>/dev/null; do servernum=$((servernum+1)); done
-
-  LC_CTYPE=en_US.UTF-8 xvfb-run -a -n "$servernum" make EXTRA_CFLAGS="$CFLAGS"
-}
-
-check() {
-  # test_gdb is expected to fail with LTO
-  # test_subprocess hangs on 3.6.3
-
-  cd Python-${pkgver}
-
-  # Obtain next free server number for xvfb-run; this even works in a chroot environment.
-  export servernum=99
-  while ! xvfb-run -a -n "$servernum" /bin/true 2>/dev/null; do servernum=$((servernum+1)); done
-
-  LD_LIBRARY_PATH="${srcdir}/Python-${pkgver}":${LD_LIBRARY_PATH} \
-  LC_CTYPE=en_US.UTF-8 xvfb-run -a -n "$servernum" \
-    "${srcdir}/Python-${pkgver}/python" -m test.regrtest -v -uall -x test_gdb -x test_subprocess
+   make EXTRA_CFLAGS="$CFLAGS"
 }
 
 package() {
